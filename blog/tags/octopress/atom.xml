<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Octopress | 杂七杂八记一下]]></title>
  <link href="http://lixxu.me/blog/tags/octopress/atom.xml" rel="self"/>
  <link href="http://lixxu.me/"/>
  <updated>2014-06-09T15:33:59+08:00</updated>
  <id>http://lixxu.me/</id>
  <author>
    <name><![CDATA[Lix Xu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[使用 Thin 作为 Octopress 预览服务器]]></title>
    <link href="http://lixxu.me/blog/2014/01/16/use-thin-as-preview-server/"/>
    <updated>2014-01-16T10:06:15+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/16/use-thin-as-preview-server</id>
    <content type="html"><![CDATA[<p>Windows 平台下 Octopress 自带的 <code>WEBrick</code> 有点慢, 于是就想使用 <code>Thin</code> 代替.
放狗一搜, 这里有答案了:</p>

<ul>
<li><a href="http://blog.geoffpetrie.com/blog/2012/10/14/octopress-change-the-default-preview-server/">http://blog.geoffpetrie.com/blog/2012/10/14/octopress-change-the-default-preview-server/</a></li>
</ul>


<h4>操作步骤:</h4>

<!--more-->


<p>&nbsp;1. 安装 Thin
<code>
gem install thin
</code></p>

<p>&nbsp;2. 更改 <code>Gemfile</code>, 在 <code>development</code> 里面最后添加一行
``` ruby Gemfile
source &ldquo;<a href="http://ruby.taobao.org">http://ruby.taobao.org</a>&rdquo;</p>

<p>group :development do
  gem &lsquo;rake&rsquo;, &lsquo;~> 0.9&rsquo;
  gem &lsquo;jekyll&rsquo;, &lsquo;~> 0.12&rsquo;
  gem &lsquo;rdiscount&rsquo;, &lsquo;~> 2.0.7&rsquo;
  gem &lsquo;pygments.rb&rsquo;, &lsquo;~> 0.3.4&rsquo;
  gem &lsquo;RedCloth&rsquo;, &lsquo;~> 4.2.9&rsquo;
  gem &lsquo;haml&rsquo;, &lsquo;~> 3.1.7&rsquo;
  gem &lsquo;compass&rsquo;, &lsquo;~> 0.12.2&rsquo;
  gem &lsquo;sass&rsquo;, &lsquo;~> 3.2&rsquo;
  gem &lsquo;sass-globbing&rsquo;, &lsquo;~> 1.0.0&rsquo;
  gem &lsquo;rubypants&rsquo;, &lsquo;~> 0.2.0&rsquo;
  gem &lsquo;rb-fsevent&rsquo;, &lsquo;~> 0.9&rsquo;
  gem &lsquo;stringex&rsquo;, &lsquo;~> 1.4.0&rsquo;
  gem &lsquo;liquid&rsquo;, &lsquo;~> 2.3.0&rsquo;
  gem &lsquo;directory_watcher&rsquo;, &lsquo;1.4.1&rsquo;
  gem &lsquo;thin&rsquo;
end</p>

<p>gem &lsquo;sinatra&rsquo;, &lsquo;~> 1.4.2&rsquo;
```</p>

<p>&nbsp;3. 重新运行 <code>rake preview</code> 就会使用 <code>Thin</code> 了</p>

<!--more-->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress的其他杂项]]></title>
    <link href="http://lixxu.me/blog/2014/01/15/other-stuff/"/>
    <updated>2014-01-15T14:13:56+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/15/other-stuff</id>
    <content type="html"><![CDATA[<p>放了半天狗, 添加许多小东西到 Octopress, 如 <code>tags</code>, <code>相关文章</code>, <code>添加多说评论到边栏</code> 等等.</p>

<p>参考文章: <a href="http://blog.csdn.net/lcliliil/article/details/13725895">http://blog.csdn.net/lcliliil/article/details/13725895</a></p>

<p><del>不过, 多说的侧边栏评论一直不显示标题, 找了半天也没找到解决方法. 有知道的达人麻烦告知一下.</del>
<strong>更新</strong>: 已经搞定了, 需要添加 <code>data-thread-key</code> 属性</p>

<p>暂时不想再弄了, 以后再说吧.</p>

<ul>
<li>在 <code>source\_includes\post\duoshuo.html</code> 中使用 <code>page</code></li>
<li>在 <code>source\_includes\article.html</code> 中如果是首页使用 <code>post</code>, 否则使用 <code>post</code></li>
</ul>


<p>我把加载 js 的部分放到 <code>source\_layouts\default.html</code> 里了, 加在 <code>&lt;/body&gt;</code> 前即可.</p>

<!--more-->


<p>```html source_layouts\default.html
{% if site.duoshuo_short_name and site.duoshuo_comments == true %}
  <!-- 多说js加载开始，一个页面只需要加载一次 -->
  <script type="text/javascript"></p>

<pre><code>var duoshuoQuery = {short_name:"{{ site.duoshuo_short_name }}"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</code></pre>

<p>  </script>
  <!-- 多说js加载结束，一个页面只需要加载一次 -->
{% endif %}
```</p>

<p>```html source_includes\post\duoshuo.html</p>

<!-- Duoshuo Comment BEGIN -->


<div class="ds-thread" data-thread-key="{{ page.url }}" data-title="{{ page.title }}" data-url="{{ page.url }}"></div>


<!-- Duoshuo Comment END -->


<p><code>
</code>html source_includes\article.html
{% if site.duoshuo_short_name and page.comments != false and post.comments != false and site.duoshuo_comments == true %}</p>

<pre><code>| &lt;a href="{% if index %}{{ root_url }}{{ post.url }}{% endif %}#comments"&gt;&lt;span class="ds-thread-count" data-thread-key="{% if index %}{{ post.url }}{% else %}{{ page.url }}{% endif %}" data-count-type="comments"&gt;暂无评论&lt;/span&gt;&lt;/a&gt;
</code></pre>

<p>{% endif %}
```</p>

<!--more-->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress使用多说评论系统]]></title>
    <link href="http://lixxu.me/blog/2014/01/15/use-duoshuo/"/>
    <updated>2014-01-15T09:44:48+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/15/use-duoshuo</id>
    <content type="html"><![CDATA[<p>参考来源:</p>

<ul>
<li><a href="http://dinever.com/blog/2012/12/05/zai-octopresszhong-shi-yong-duo-shuo/">http://dinever.com/blog/2012/12/05/zai-octopresszhong-shi-yong-duo-shuo/</a></li>
<li><a href="http://havee.me/internet/2013-02/add-duoshuo-commemt-system-into-octopress.html">http://havee.me/internet/2013-02/add-duoshuo-commemt-system-into-octopress.html</a></li>
</ul>


<p>照着文章来就行了, 没啥好说的, 这里记一下备忘, 把 <code>yourname</code> 替换成你自己的名字.</p>

<!--more-->


<p>&nbsp;1. 注册多说, 不必多说, 复制生成的代码到 <code>source\_includes\post</code> 下新建 <code>duoshuo.html</code>
```html</p>

<!-- Duoshuo Comment BEGIN -->


<div class="ds-thread"></div>


<script type="text/javascript">
    var duoshuoQuery = {short_name:"yourname"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = 'http://static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>


<!-- Duoshuo Comment END -->


<p>```</p>

<p>&nbsp;2. 编辑 <code>_config.yml</code>, 添加下面两行:
```yaml</p>

<h1>duoshuo comments</h1>

<p>duoshuo_comments: true
duoshuo_short_name: yourname
```</p>

<p>&nbsp;3. 在 <code>source\_layouts\post.html</code> disqus设置下面添加:
```html
{% if site.duoshuo_short_name and site.duoshuo_comments == true and page.comments == true %}
  <section></p>

<pre><code>&lt;h1&gt;Comments&lt;/h1&gt;
&lt;div id="comments" aria-live="polite"&gt;{% include post/duoshuo.html %}&lt;/div&gt;
</code></pre>

<p>  </section>
{% endif %}
```</p>

<!--more-->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[添加分类列表到边栏]]></title>
    <link href="http://lixxu.me/blog/2014/01/14/add-categories-sidebar/"/>
    <updated>2014-01-14T23:09:10+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/14/add-categories-sidebar</id>
    <content type="html"><![CDATA[<p>来源: <a href="http://www.dotnetguy.co.uk/post/2012/06/25/octopress-category-list-plugin/">http://www.dotnetguy.co.uk/post/2012/06/25/octopress-category-list-plugin/</a></p>

<p>简单记下过程</p>

<!--more-->


<ol>
<li>在 <code>plugins</code> 目录下新建一个 ruby 代码文件, 如 <code>category_list_tag.rb</code>
```ruby category_list_tag.rb
module Jekyll
class CategoryListTag &lt; Liquid::Tag
 def render(context)
   html = &ldquo;&rdquo;
   categories = context.registers[:site].categories.keys
   categories.sort.each do |category|
     posts_in_category = context.registers[:site].categories[category].size
     category_dir = context.registers[:site].config[&lsquo;category_dir&rsquo;]
     category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, &lsquo;&ndash;&rsquo;).gsub(/&ndash;{2,}/, &lsquo;&ndash;&rsquo;).downcase)
     html &lt;&lt; &ldquo;<li class='category'><a href='http://lixxu.me/#{category_url}/'>#{category} (#{posts_in_category})</a></li>\n&rdquo;
   end
   html
 end
end
end</li>
</ol>


<p>Liquid::Template.register_tag(&lsquo;category_list&rsquo;, Jekyll::CategoryListTag)
<code>``
2. 在</code>source/_includes/asides<code>下新建一个 html 文件, 如</code>category_list.html`
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>category_list.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Categories<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span>{% category_list %}
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>我还顺手添了一个外部链接列表的边栏 <code>asides/other_links.html</code>, 先添一个, 后续再加
```html asides/other_links.html
<section>
  <h1>Links</h1>
  <ul id="links"></p>

<pre><code>&lt;li&gt;&lt;a href="https://github.com/lixxu/"&gt;GitHub projects&lt;/a&gt;&lt;/li&gt;
</code></pre>

<p>  </ul>
</section>
<code>
3. 修改 `_config.yml`, 添加分类和外部链接
</code>yaml _config.yml
default_asides: [asides/recent_posts.html, asides/category_list.html, asides/other_links.html, asides/twitter.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]
```</p>

<p>另外, 如果想在分类里使用空格, 直接按 html 语法写 <code>CAT1&amp;nbsp;CAT11</code></p>

<!--more-->

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[开篇]]></title>
    <link href="http://lixxu.me/blog/2014/01/14/first-post/"/>
    <updated>2014-01-14T13:21:29+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/14/first-post</id>
    <content type="html"><![CDATA[<p>很久以前就想写写博客, 随便记点什么. 又想自己写个博客程序练练手, 不过由于种种原因都放弃了. 虽然一直在用为知笔记, 也确实不错, 不过现在是一个装的时代, 不搞个博客出去都不好意思打招呼.</p>

<p>于是想起了日渐流行的把博客放到良心的 <a href="https://github.com">github</a> 上的做法, 放放狗查查教程, 简单写下设置过程.</p>

<!--more-->


<h3>[附] Windows下安装方法</h3>

<h4>1. 安装ruby</h4>

<p>到 <a href="http://rubyinstaller.org/downloads/">http://rubyinstaller.org/downloads/</a> 下载ruby, 如果你不方便安装, 可以下载7zip格式的(我就是用的这种, 办公电脑不方便安装).</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;1. 解压到某文件夹, 如 <strong>D:\ruby</strong><br/>
&nbsp;&nbsp;&nbsp;&nbsp;2. 添加到环境变量, 如 <strong>D:\ruby\bin</strong></p>

<h4>2. 安装devkit</h4>

<p>下载devkit, 右键解压到一个文件夹(如d:\devkit)
<code>
ruby dk.rb init
ruby dk.rb install
</code>
<strong>注意:</strong><br/>
运行install前得编辑config.yml, 在最后面添加 <strong><code>- d:/ruby</code></strong> 一行, 注意最前面的 <strong><code>-</code></strong> 一定得加上.</p>

<h4>3. 添加环境变量, 方便使用中文</h4>

<p>LANG=zh_CN.UTF-8 和 LC_ALL=zh_CN.UTF-8</p>

<h4>4. 安装Octopress</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;1. 安装Octopress
<code>
git clone git://github.com/imathis/octopress.git myblog
cd myblog    //这边会有提示信息, yes就行
ruby --version  //Ruby的版本需要在1.9.3+版本
</code>
&nbsp;&nbsp;&nbsp;&nbsp;2. 更换 gem 源(国内环境, 你懂的)
<code>
gem sources -r http://rubygems.org/
gem sources -a http://ruby.taobao.org/
gem sources -l
</code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;3. 安装插件
<code>
gem install bundler
bundle install
</code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;4. 安装Octopress 主题
<code>
rake install
</code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;5. 修改配置
修改配置文件_config.yml, 修改url、title、subtitle、author等等, 可以把评论disqus加上, google+等等, 择需加上.</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;6. 创建github仓库 (如果你想要这样的网址 <strong>username.github.io</strong>, 仓库名得写成这样的: <strong>username.github.io</strong>, 好像 <strong>username.github.com</strong> 的不行了, github pages都转到github.io了)</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;7. 本地配置github分支
<code>
rake setup_github_pages
</code>
当命令提示你输入github URL时, 输入刚才建立的git地址</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;8. 好了, 写文章吧
<code>
rake new_post["my first blog"]
</code>
在 <code>myblog/source/_post</code> 下生成一个 <code>**.makedown</code> 的文件, 编辑文章即可.</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;9. 生成, 预览
<code>
rake generate
rake preview
</code>
在浏览器中打开 <a href="http://127.0.0.1:4000">http://127.0.0.1:4000</a> 就可在本地调试页面</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;10. git提交
<code>
rake deploy
</code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;11. 别忘了把源代码同步到 <code>github</code> 上.
<code>
git add .
git commit -m 'your message'
git push origin source
</code></p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;12. 打完收工.</p>

<h5>参考文章 <a href="http://www.xiaoche.me/blog/2012/01/18/install-octopress/">http://www.xiaoche.me/blog/2012/01/18/install-octopress/</a></h5>

<!--more-->

]]></content>
  </entry>
  
</feed>