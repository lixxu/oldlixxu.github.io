<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Category&nbsp;Side | 杂七杂八记一下]]></title>
  <link href="http://lixxu.me/blog/categories/category-side/atom.xml" rel="self"/>
  <link href="http://lixxu.me/"/>
  <updated>2014-01-15T09:27:34+08:00</updated>
  <id>http://lixxu.me/</id>
  <author>
    <name><![CDATA[Lix Xu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[添加分类列表到边栏]]></title>
    <link href="http://lixxu.me/blog/2014/01/14/add-categories-sidebar/"/>
    <updated>2014-01-14T23:09:10+08:00</updated>
    <id>http://lixxu.me/blog/2014/01/14/add-categories-sidebar</id>
    <content type="html"><![CDATA[<p>来源: <a href="http://www.dotnetguy.co.uk/post/2012/06/25/octopress-category-list-plugin/">http://www.dotnetguy.co.uk/post/2012/06/25/octopress-category-list-plugin/</a></p>

<p>简单记下过程</p>

<p>&nbsp;&nbsp;1. 在 <code>plugins</code> 目录下新建一个 ruby 代码文件, 如 <code>category_list_tag.rb</code>
```ruby category_list_tag.rb
module Jekyll
  class CategoryListTag &lt; Liquid::Tag</p>

<pre><code>def render(context)
  html = ""
  categories = context.registers[:site].categories.keys
  categories.sort.each do |category|
    posts_in_category = context.registers[:site].categories[category].size
    category_dir = context.registers[:site].config['category_dir']
    category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, '-').gsub(/-{2,}/, '-').downcase)
    html &lt;&lt; "&lt;li class='category'&gt;&lt;a href='http://lixxu.me/#{category_url}/'&gt;#{category} (#{posts_in_category})&lt;/a&gt;&lt;/li&gt;\n"
  end
  html
end
</code></pre>

<p>  end
end</p>

<p>Liquid::Template.register_tag(&lsquo;category_list&rsquo;, Jekyll::CategoryListTag)
```</p>

<p>&nbsp;&nbsp;2. 在 <code>source/_includes/asides</code> 下新建一个 html 文件, 如 <code>category_list.html</code>
<div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>category_list.html </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;section&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h1&gt;</span>Categories<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;pre&gt;&lt;code&gt;</span>{% category_list %}
</span><span class='line'><span class="nt">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>  <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>我还顺手添了一个外部链接列表的边栏 <code>asides/other_links.html</code>, 先添一个, 后续再加
```html asides/other_links.html
<section>
  <h1>Links</h1>
  <ul id="links"></p>

<pre><code>&lt;li&gt;&lt;a href="https://github.com/lixxu/"&gt;GitHub projects&lt;/a&gt;&lt;/li&gt;
</code></pre>

<p>  </ul>
</section>
```</p>

<p>&nbsp;&nbsp;3. 修改 <code>_config.yml</code>, 添加分类和外部链接
<code>yaml _config.yml
default_asides: [asides/recent_posts.html, asides/category_list.html, asides/other_links.html, asides/twitter.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]
</code></p>

<p>另外, 如果想在分类里使用空格, 直接按 html 语法写 <code>CAT1&amp;nbsp;CAT11</code></p>
]]></content>
  </entry>
  
</feed>
